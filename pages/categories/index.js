import axios from '../../lib/axios';

import Head from 'next/head'
import Header from '../../components/layout/main-header'
import Footer from '../../components/layout/footer'
import ProductsHeroSecion from '../../components/products/products-hero-section'
import LangSwitch from '../../components/layout/langswitch'

import Product from '../../components/products/product';
import Branches from '../../components/branches'
import ProductsCategoriesNav from '../../components/products/products-categories-nav'
import TypesNav from '../../components/types/types-nav'

export default function ProductsPage(props) {
  const categories = props.allcategories;
  const types = props.alltypes;
  const products = props.allproducts;
  
    return (
      <div>
      <Head>
        <title>All Categories</title>
        <meta title="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <LangSwitch />
      <Header />
      <ProductsHeroSecion />

      <ProductsCategoriesNav categories={categories}/>
         
     
      <div className="my-10 bg-white border border-black shadow-xl px-6 py-4 relative z-1 w-3/4 h-auto mx-auto rounded-lg">
      <TypesNav types={types}/>
      <Product products={products} />
      </div>
   
      <Branches/>
      <Footer />
      </div>
    )
  }
  export async function getStaticProps(context) {
    const categories = await axios.get("http://127.0.0.1:8000/api/categories");
    const types = await axios.get("http://127.0.0.1:8000/api/types");
    const products = await axios.get("http://127.0.0.1:8000/api/products");
    return {
      props: {
        allcategories: categories.data,
        alltypes: types.data,
        allproducts: products.data,
      },
      revalidate: 30
    };
  }
 